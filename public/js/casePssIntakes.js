"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[654],{4993:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var t=a(5714),r=a(7907),n=a.n(r),i=a(5480);const o={mixins:[i.Z],components:{Multiselect:n()},props:{pssIntakeEditMode:Boolean,selectedPssIntake:Object},data:function(){return{caseebeneficiaries:[],directIndividual:"",referralSources:[],nationalities:[],referralReasons:[],users:[],roles:[],pssIntakeForm:new t.ZP({id:"",referral_source_id:"",referral_date:"",referring_person_name:"",referring_person_email:"",referral_narrative_reason:"",referral_reasons:[],casee_id:""})}},watch:{selectedPssIntake:function(e,s){this.pssIntakeForm.fill(this.selectedPssIntake),this.pssIntakeForm.casee_id=this.$route.params.caseeId}},methods:{createPssIntake:function(){var e=this;this.$Progress.start(),this.pssIntakeForm.post("/api/referrals").then((function(s){$("#pssIntakeModal").modal("hide"),Fire.$emit("caseePssIntakesChanged"),e.createdPssIntake=s.data.referral,Toast.fire({icon:"success",title:"Created successfully"}),e.$Progress.finish()})).catch((function(s){e.$Progress.fail(),console.log(s)}))},updatePssIntake:function(){var e=this;this.$Progress.start(),this.pssIntakeForm.put("/api/referrals/"+this.pssIntakeForm.id).then((function(){Fire.$emit("caseePssIntakesChanged"),$("#pssIntakeModal").modal("hide"),Swal.fire("Updated!","It has been updated.","success"),e.$Progress.finish()})).catch((function(){e.$Progress.fail()}))}},created:function(){this.getReferralSources(),this.getNationalities(),this.getReferralReasons()}};var l=a(1900);const c=(0,l.Z)(o,(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"modal fade",attrs:{id:"pssIntakeModal",tabindex:"-1","aria-labelledby":"pssIntakeModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{directives:[{name:"show",rawName:"v-show",value:!e.pssIntakeEditMode,expression:"!pssIntakeEditMode"}],staticClass:"modal-title",attrs:{id:"pssIntakeModalLabel"}},[e._v("Create New PSS Intake")]),e._v(" "),a("h5",{directives:[{name:"show",rawName:"v-show",value:e.pssIntakeEditMode,expression:"pssIntakeEditMode"}],staticClass:"modal-title",attrs:{id:"pssIntakeModalLabel"}},[e._v("Edit PSS Intake")]),e._v(" "),e._m(0)]),e._v(" "),a("form",{on:{submit:function(s){s.preventDefault(),e.pssIntakeEditMode?e.updatePssIntake():e.createPssIntake()}}},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"referral_source_id"}},[e._v("Referral Source")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.pssIntakeForm.referral_source_id,expression:"pssIntakeForm.referral_source_id"}],staticClass:"form-control",class:{"is-invalid":e.pssIntakeForm.errors.has("referral_source_id")},attrs:{name:"referral_source_id",id:"referral_source_id"},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.pssIntakeForm,"referral_source_id",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0",disabled:""}},[e._v("Choose...")]),e._v(" "),e._l(e.referralSources,(function(s){return a("option",{key:s.id,domProps:{value:s.id}},[e._v(e._s(s.name))])}))],2),e._v(" "),a("HasError",{attrs:{form:e.pssIntakeForm,field:"referral_source_id"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"referral_date"}},[e._v("Intake / Referral Date")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pssIntakeForm.referral_date,expression:"pssIntakeForm.referral_date"}],staticClass:"form-control",attrs:{id:"referral_date",type:"text",name:"referral_date",autocomplete:"off",placeholder:"YYYY-MM-DD"},domProps:{value:e.pssIntakeForm.referral_date},on:{input:function(s){s.target.composing||e.$set(e.pssIntakeForm,"referral_date",s.target.value)}}}),e._v(" "),a("HasError",{attrs:{form:e.pssIntakeForm,field:"referral_date"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"referring_person_name"}},[e._v("Referring Person Name")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pssIntakeForm.referring_person_name,expression:"pssIntakeForm.referring_person_name"}],staticClass:"form-control",attrs:{id:"referring_person_name",type:"text",name:"referring_person_name"},domProps:{value:e.pssIntakeForm.referring_person_name},on:{input:function(s){s.target.composing||e.$set(e.pssIntakeForm,"referring_person_name",s.target.value)}}}),e._v(" "),a("HasError",{attrs:{form:e.pssIntakeForm,field:"referring_person_name"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"referring_person_email"}},[e._v("Referring Person Email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.pssIntakeForm.referring_person_email,expression:"pssIntakeForm.referring_person_email"}],staticClass:"form-control",attrs:{id:"referring_person_email",type:"email",name:"referring_person_email"},domProps:{value:e.pssIntakeForm.referring_person_email},on:{input:function(s){s.target.composing||e.$set(e.pssIntakeForm,"referring_person_email",s.target.value)}}}),e._v(" "),a("HasError",{attrs:{form:e.pssIntakeForm,field:"referring_person_email"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"typo__label"},[e._v("Referral Reasons")]),e._v(" "),a("multiselect",{attrs:{options:e.referralReasons,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"name","preselect-first":!0},model:{value:e.pssIntakeForm.referral_reasons,callback:function(s){e.$set(e.pssIntakeForm,"referral_reasons",s)},expression:"pssIntakeForm.referral_reasons"}})],1),e._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-label",attrs:{for:"referral_narrative_reason"}},[e._v("Referral Narrative Reason")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.pssIntakeForm.referral_narrative_reason,expression:"pssIntakeForm.referral_narrative_reason"}],staticClass:"form-control",attrs:{rows:"3",name:"referral_narrative_reason"},domProps:{value:e.pssIntakeForm.referral_narrative_reason},on:{input:function(s){s.target.composing||e.$set(e.pssIntakeForm,"referral_narrative_reason",s.target.value)}}}),e._v(" "),a("HasError",{attrs:{form:e.pssIntakeForm,field:"referral_narrative_reason"}})],1)]),e._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.pssIntakeEditMode,expression:"!pssIntakeEditMode"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Create")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:e.pssIntakeEditMode,expression:"pssIntakeEditMode"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Update")])])])])])])}),[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])}],!1,null,null,null).exports;a(115);const d={name:"caseeReferrals",components:{Multiselect:n(),PssIntakeModal:c},mixins:[i.Z],props:{caseeId:{required:!0}},data:function(){return{caseeReferrals:[],pssIntakeEditMode:!1,selectedPssIntake:{}}},methods:{showCreatePssIntake:function(){this.pssIntakeEditMode=!1,this.selectedPssIntake={},$("#pssIntakeModal").modal("show")},showEditPssIntake:function(e){this.pssIntakeEditMode=!0,this.selectedPssIntake=e,$("#pssIntakeModal").modal("show")}},created:function(){var e=this;this.getCaseeReferrals(this.caseeId),Fire.$on("caseeBeneficiariesChanged",(function(){e.getCasee(e.caseeId)})),Fire.$on("caseePssIntakesChanged",(function(){e.getCaseeReferrals(e.caseeId)}))}};const m=(0,l.Z)(d,(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"card-body"},[a("div",{staticClass:"row ml-2"},[a("button",{staticClass:"btn btn-success btn-sm mr-2",on:{click:e.showCreatePssIntake}},[a("i",{staticClass:"fas fa-plus-circle"}),e._m(0)]),e._v(" "),a("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(s){return e.getCaseeReferrals(e.caseeId)}}},[a("i",{staticClass:"fas fa-sync-alt"})])]),e._v(" "),a("div",{staticClass:"row mt-3 table-responsive"},[a("p",{directives:[{name:"show",rawName:"v-show",value:!e.caseeReferrals.length,expression:"!caseeReferrals.length"}],staticClass:"font-italic ml-5"},[e._v("This case has no PSS Intakes!")]),e._v(" "),a("table",{directives:[{name:"show",rawName:"v-show",value:e.caseeReferrals.length,expression:"caseeReferrals.length"}],staticClass:"border table table-hover table-sm"},[e._m(1),e._v(" "),this.caseeReferrals?a("tbody",e._l(this.caseeReferrals,(function(s){return a("tr",{key:s.id},[a("td",[e._v(e._s(s.referral_source.name))]),e._v(" "),a("td",[e._v(e._s(e._f("myDateShort")(s.referral_date)))]),e._v(" "),a("td"),e._v(" "),a("td",[a("div",{staticClass:"list-unstyled"},e._l(s.records,(function(s,t){return a("li",{key:s.id},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t,expression:"i==0"}]},[a("span",{directives:[{name:"show",rawName:"v-show",value:"Inactive"==s.status.name,expression:"record.status.name == 'Inactive'"}],staticClass:"badge badge-pill badge-secondary"},[e._v(e._s(s.status.name))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"Active"==s.status.name,expression:"record.status.name == 'Active'"}],staticClass:"badge badge-pill badge-success"},[e._v(e._s(s.status.name))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"Closed"==s.status.name,expression:"record.status.name == 'Closed'"}],staticClass:"badge badge-pill badge-dark"},[e._v(e._s(s.status.name))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==s.is_new,expression:"record.is_new == 1"}],staticClass:"badge badge-pill badge-info"},[e._v("New")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==s.is_new,expression:"record.is_new == 0"}],staticClass:"badge badge-pill badge-warning"},[e._v("Ongoing")])])])})),0)]),e._v(" "),a("td",[e._v(e._s(s.current_assigned_psw.full_name))]),e._v(" "),a("td",[a("router-link",{staticClass:"fa fa-eye blue align-middle mr-2",attrs:{to:{name:"referralDetails",params:{caseeId:e.caseeId,referralId:s.id}}}}),e._v(" "),a("a",{staticClass:"clickable",on:{click:function(a){return e.showEditPssIntake(s)}}},[a("i",{staticClass:"fas fa-pencil-alt blue mr-2"})]),e._v(" "),e._m(2,!0)],1)])})),0):e._e()])]),e._v(" "),a("PssIntakeModal",{attrs:{"v-if":e.selectedPssIntake.id,pssIntakeEditMode:e.pssIntakeEditMode,selectedPssIntake:e.selectedPssIntake},on:{referralsChanged:function(s){return e.getCasee()}}})],1)}),[function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("span",[a("b",[e._v(" PSS Intake")])])},function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("thead",[a("tr",[a("th",[e._v("Source")]),e._v(" "),a("th",[e._v("Intake Date")]),e._v(" "),a("th",[e._v("Close Date")]),e._v(" "),a("th",[e._v("Current Status")]),e._v(" "),a("th",[e._v("Assigned Worker")]),e._v(" "),a("th",[e._v("Actions")])])])},function(){var e=this.$createElement,s=this._self._c||e;return s("a",{staticClass:"clickable"},[s("i",{staticClass:"fa fa-trash red"})])}],!1,null,"7b48a60a",null).exports}}]);
//# sourceMappingURL=casePssIntakes.js.map