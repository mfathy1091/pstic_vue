"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[607],{3460:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(7897),n=i.n(a),s=i(1519),r=i.n(s)()(n());r.push([e.id,".clickable[data-v-448a2208]{cursor:pointer}","",{version:3,sources:["webpack://./resources/js/components/CaseDetails/CaseBeneficiaries/CaseBeneficiaries.vue"],names:[],mappings:"AACA,4BACA,cACA",sourcesContent:['<style scoped>\n.clickable {\n    cursor: pointer\n}\n</style>\n<template>\n    <div>\n        <div class="card-body">\n            <div class="row ml-2">\n\t\t\t\t<button class="btn btn-success btn-sm mr-2" @click="showCreateBeneficiaryModal">\n\t\t\t\t\t<i class="fas fa-plus-circle"></i><span><b> Beneficiary</b></span>\n\t\t\t\t</button>\n\n                <button class="btn btn-secondary btn-sm" @click="getCaseeBeneficiaries(caseeId)">\n\t\t\t\t\t<i class="fas fa-sync-alt"></i>\n\t\t\t\t</button>\n\t\t\t</div>\n\n\n            <div class="row mt-3">\n\t\t\t\t\t<p v-if="!caseeBeneficiaries.length" class="font-italic ml-5">This case has no linked beneficiaries!</p>\n\n                \x3c!-- beneficiaries --\x3e\n                <div v-for="beneficiary in caseeBeneficiaries" :key="beneficiary.id">\n\n                    <div class="card individual-card" style="width: 18rem;">\n                        <div class="overlay bg-white-50" v-show="beneficiary.is_active == 0">\n                            <div class="p-4 text-center">\n                                <h3 class="bg-white text-secondary">Inactive</h3>\n                                <a class="clickable text-primary p-2 bg-white" @click="activateBeneficiary(beneficiary)">Click here re-activate</a>\n                            </div>\n                        </div>\n                        <div class="card-body">\n\n                            <h4 class="card-title">{{ beneficiary.name }}</h4>\n                                \n                            <div class="float-right">\n                                <a class="clickable" @click="showEditBeneficiaryModal(beneficiary)">\n                                    <i class="fas fa-pencil-alt blue mr-2"></i>\n                                </a>\n                                \n                                <a class="clickable">\n                                    <i class="fa fa-trash red" @click="deleteBeneficiary(beneficiary)"></i>\n                                </a>\n\n                            </div>\n                            \n\n\n                            <br>\n                            <br>\n\n                            <div class="mb-0 fa-ul">\n                                <li><span class="text-sm"></span>{{ beneficiary.age }} years; {{ beneficiary.gender.name }}; {{ beneficiary.nationality.name }}</li>\n                                <li><span class="text-sm"></span><i class="fas fa-phone-square-alt"></i> {{ beneficiary.phone_number}}</li>\n                                <li><span class="text-sm"></span><b>Passport #:</b> {{ beneficiary.passport_number }}</li>\n\n                            </div>\n                            <hr>\n                            <span class="text-sm"><b>File Details</b></span>\n\n                            <ul class="mb-0 fa-ul">\n                                <li><span class="fa-li"></span><b>File Individual number:</b> {{ beneficiary.file_individual_number }}</li>\n                                <li><span class="fa-li"></span><b>Relationship:</b> {{ beneficiary.relationship.name}}</li>\n                            </ul>\n                            <a class="clickable orange" @click="deactivateBeneficiary(beneficiary)">Deactivate</a>\n\n                        </div>\n                        \n                    </div>\n                    \n                </div>\n\n            </div>\n        </div>\n\n\t\t<BeneficiaryModal\n\t\t:v-if="selectedBeneficiary.id"\n\t\t:beneficiaryEditMode=\'beneficiaryEditMode\' \n\t\t:selectedBeneficiary=\'selectedBeneficiary\' \n\t\tv-on:caseeBeneficiariesChanged="getCaseeBeneficiaries(caseeId)">\n\t\t</BeneficiaryModal>\n\n    </div>\n</template>\n\n<script>\nimport Form from \'vform\'\nimport Multiselect from \'vue-multiselect\'\nimport BeneficiaryModal from \'./BeneficiaryModal\'\nimport axiosMixin from \'../../../mixins/axiosMixin\'\n\nexport default {\n    name: \'Casebeneficiaries\',\n    mixins: [axiosMixin], \n\n    components: {\n        Multiselect,\n        BeneficiaryModal,\n    },\n\n    props: {\n        caseeId: {\n            // type: Number, \n            required: true   \n        }\n    },\n\n    data(){\n        return {\n            caseeBeneficiaries: [],\n            beneficiaryEditMode: false,\n\t\t\tselectedBeneficiary: {},\n        }\n    },\n    methods: {\n\n        unlinkIndividual(beneficiary_id){\n            this.$Progress.start();\n\t\t\taxios.put(\'/api/beneficiaries/\' + beneficiary_id + \'/unlink\' )\n\t\t\t.then(() => {\n\t\t\t\t// success\n\t\t\t\tFire.$emit(\'caseeBeneficiariesChanged\');\n\t\t\t\t// $(\'#individualModal\').modal(\'hide\')\n\t\t\t\tSwal.fire(\n\t\t\t\t\t\'Unlinked!\',\n\t\t\t\t\t\'Unlinked successfully.\',\n\t\t\t\t\t\'success\'\n\t\t\t\t)\n\t\t\t\tthis.$Progress.finish();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\t// error\n\t\t\t\tthis.$Progress.fail();\n\t\t\t})\n        },\n\n        showCreateBeneficiaryModal(){\n\t\t\tthis.beneficiaryEditMode = false;\n\t\t\tthis.selectedBeneficiary = {};\n\t\t\t$(\'#beneficiaryModal\').modal(\'show\')\n\t\t},\n\n        showEditBeneficiaryModal(beneficiary){\n\t\t\tthis.beneficiaryEditMode = true;\n\t\t\tthis.selectedBeneficiary = beneficiary;\n\t\t\t$(\'#beneficiaryModal\').modal(\'show\')\n\t\t},\n\n        activateBeneficiary(beneficiary)\n            {\n                Swal.fire({\n\t\t\t\ttitle: \'Are you sure?\',\n\t\t\t\t// text: "You won\'t be able to include this beneficiary in new referrals!",\n\t\t\t\ticon: \'warning\',\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \'#3085d6\',\n\t\t\t\tcancelButtonColor: \'#d33\',\n\t\t\t\tconfirmButtonText: \'Yes, re-activate it!\'\n\t\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tif (result.isConfirmed) {\n\t\t\t\t\tthis.$Progress.start();\n\t\t\t\t\taxios.put(\'/api/beneficiaries/\'+beneficiary.id + \'/activate\')\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t// success\n\t\t\t\t\t\tFire.$emit(\'caseeBeneficiariesChanged\');\n\t\t\t\t\t\tSwal.fire(\n\t\t\t\t\t\t\t\'Activated!\',\n\t\t\t\t\t\t\t\'It has been activated.\',\n\t\t\t\t\t\t\t\'success\'\n\t\t\t\t\t\t)\n\t\t\t\t\t\tthis.$Progress.finish();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t// error\n\t\t\t\t\t\tSwal("Failed!", "There was something wrong.", "warning");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n        deactivateBeneficiary(beneficiary)\n            {\n                Swal.fire({\n\t\t\t\ttitle: \'Are you sure?\',\n\t\t\t\ttext: "You won\'t be able to include this beneficiary in new referrals!",\n\t\t\t\ticon: \'warning\',\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \'#3085d6\',\n\t\t\t\tcancelButtonColor: \'#d33\',\n\t\t\t\tconfirmButtonText: \'Yes, deactivate it!\'\n\t\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tif (result.isConfirmed) {\n\t\t\t\t\tthis.$Progress.start();\n\t\t\t\t\taxios.put(\'/api/beneficiaries/\'+beneficiary.id + \'/deactivate\')\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t// success\n\t\t\t\t\t\tFire.$emit(\'caseeBeneficiariesChanged\');\n\t\t\t\t\t\tSwal.fire(\n\t\t\t\t\t\t\t\'Deactivated!\',\n\t\t\t\t\t\t\t\'It has been deactivated.\',\n\t\t\t\t\t\t\t\'success\'\n\t\t\t\t\t\t)\n\t\t\t\t\t\tthis.$Progress.finish();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t// error\n\t\t\t\t\t\tSwal("Failed!", "There was something wrong.", "warning");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n        deleteBeneficiary(beneficiary){\n\t\t\tSwal.fire({\n\t\t\t\ttitle: \'Are you sure?\',\n\t\t\t\ttext: "You won\'t be able to revert this!",\n\t\t\t\ticon: \'warning\',\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonColor: \'#3085d6\',\n\t\t\t\tcancelButtonColor: \'#d33\',\n\t\t\t\tconfirmButtonText: \'Yes, delete it!\'\n\t\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tif (result.isConfirmed) {\n\t\t\t\t\tthis.$Progress.start();\n\t\t\t\t\taxios.delete(\'/api/beneficiaries/\'+beneficiary.id)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t// success\n\t\t\t\t\t\tFire.$emit(\'caseeBeneficiariesChanged\');\n\t\t\t\t\t\tSwal.fire(\n\t\t\t\t\t\t\t\'Deleted!\',\n\t\t\t\t\t\t\t\'It has been deleted.\',\n\t\t\t\t\t\t\t\'success\'\n\t\t\t\t\t\t)\n\t\t\t\t\t\tthis.$Progress.finish();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t// error\n\t\t\t\t\t\tSwal("Failed!", "There was something wrong.", "warning");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t},\n    },\n    created() {\n        this.getCaseeBeneficiaries(this.caseeId);\n\n        Fire.$on(\'caseeBeneficiariesChanged\', () => {\n            this.getCaseeBeneficiaries(this.caseeId);\n        });\n    }\n}\n<\/script>'],sourceRoot:""}]);const c=r},8722:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var a=i(5714),n=i(7907),s=i.n(n),r=i(7757),c=i.n(r),o=i(5480);function l(e,t,i,a,n,s,r){try{var c=e[s](r),o=c.value}catch(e){return void i(e)}c.done?t(o):Promise.resolve(o).then(a,n)}const d={mixins:[o.Z],components:{Multiselect:s()},props:{beneficiaryEditMode:Boolean,selectedBeneficiary:Object},data:function(){return{genders:[],nationalities:[],beneficiaryStatuses:[],relationships:[],BeneficiaryForm:new a.ZP({id:"",casee_id:"",name:"",passport_number:"",age:"",gender_id:"",nationality_id:"",phone_number:"",is_active:!0,is_registered:"",file_individual_number:"",relationship_id:""})}},watch:{selectedBeneficiary:function(e,t){this.BeneficiaryForm.fill(this.selectedBeneficiary),this.BeneficiaryForm.casee_id=this.$route.params.caseeId}},methods:{createBeneficiary:function(){var e=this;this.$Progress.start(),this.BeneficiaryForm.post("/api/beneficiaries").then((function(t){$("#beneficiaryModal").modal("hide"),Fire.$emit("caseeBeneficiariesChanged"),Toast.fire({icon:"success",title:"Added successfully"}),e.$Progress.finish()})).catch((function(t){e.$Progress.fail(),console.log(t)}))},getAll:function(e,t,i){return(a=c().mark((function a(){return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,axios({method:e,url:t,data:i});case 3:return a.abrupt("return",a.sent);case 6:return a.prev=6,a.t0=a.catch(0),a.abrupt("return",a.t0.response);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})),function(){var e=this,t=arguments;return new Promise((function(i,n){var s=a.apply(e,t);function r(e){l(s,i,n,r,c,"next",e)}function c(e){l(s,i,n,r,c,"throw",e)}r(void 0)}))})();var a},updateBeneficiary:function(){var e=this;this.$Progress.start(),this.BeneficiaryForm.put("/api/beneficiaries/"+this.BeneficiaryForm.id).then((function(){Fire.$emit("caseeBeneficiariesChanged"),$("#beneficiaryModal").modal("hide"),Swal.fire("Updated!","It has been updated.","success"),e.$Progress.finish()})).catch((function(){e.$Progress.fail()}))}},created:function(){this.getNationalities(),this.getBeneficiaryStatuses(),this.getRelationships()}};var f=i(1900);const u=(0,f.Z)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modal fade",attrs:{id:"beneficiaryModal",tabindex:"-1","aria-labelledby":"beneficiaryModalLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered"},[i("div",{staticClass:"modal-content"},[i("div",{staticClass:"modal-header"},[i("h5",{directives:[{name:"show",rawName:"v-show",value:!e.beneficiaryEditMode,expression:"!beneficiaryEditMode"}],staticClass:"modal-title",attrs:{id:"beneficiaryModalLabel"}},[e._v("Add New Beneficiary")]),e._v(" "),i("h5",{directives:[{name:"show",rawName:"v-show",value:e.beneficiaryEditMode,expression:"beneficiaryEditMode"}],staticClass:"modal-title",attrs:{id:"beneficiaryModalLabel"}},[e._v("Edit Beneficiary")]),e._v(" "),e._m(0)]),e._v(" "),i("form",{on:{submit:function(t){t.preventDefault(),e.beneficiaryEditMode?e.updateBeneficiary():e.createBeneficiary()}}},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"name"}},[e._v("Name")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.name,expression:"BeneficiaryForm.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name"},domProps:{value:e.BeneficiaryForm.name},on:{input:function(t){t.target.composing||e.$set(e.BeneficiaryForm,"name",t.target.value)}}}),e._v(" "),i("HasError",{attrs:{form:e.BeneficiaryForm,field:"name"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"passport_number"}},[e._v("Passport Number")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.passport_number,expression:"BeneficiaryForm.passport_number"}],staticClass:"form-control",attrs:{id:"passport_number",type:"text",name:"passport_number"},domProps:{value:e.BeneficiaryForm.passport_number},on:{input:function(t){t.target.composing||e.$set(e.BeneficiaryForm,"passport_number",t.target.value)}}}),e._v(" "),i("HasError",{attrs:{form:e.BeneficiaryForm,field:"passport_number"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"age"}},[e._v("Age")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.age,expression:"BeneficiaryForm.age"}],staticClass:"form-control",attrs:{id:"age",type:"number",name:"age",onwheel:"return false;"},domProps:{value:e.BeneficiaryForm.age},on:{input:function(t){t.target.composing||e.$set(e.BeneficiaryForm,"age",t.target.value)}}}),e._v(" "),i("HasError",{attrs:{form:e.BeneficiaryForm,field:"age"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"gender_id"}},[e._v("Gender")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.gender_id,expression:"BeneficiaryForm.gender_id"}],staticClass:"form-control",class:{"is-invalid":e.BeneficiaryForm.errors.has("gender_id")},attrs:{name:"gender_id",id:"gender_id"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.BeneficiaryForm,"gender_id",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0",disabled:""}},[e._v("Choose...")]),e._v(" "),i("option",{attrs:{value:"1"}},[e._v("Male")]),e._v(" "),i("option",{attrs:{value:"2"}},[e._v("Female")])]),e._v(" "),i("has-error",{attrs:{form:e.BeneficiaryForm,field:"gender_id"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"nationality_id"}},[e._v("Nationality")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.nationality_id,expression:"BeneficiaryForm.nationality_id"}],staticClass:"form-control",class:{"is-invalid":e.BeneficiaryForm.errors.has("nationality_id")},attrs:{name:"nationality_id",id:"nationality_id"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.BeneficiaryForm,"nationality_id",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0",disabled:""}},[e._v("Choose...")]),e._v(" "),e._l(e.nationalities,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2),e._v(" "),i("has-error",{attrs:{form:e.BeneficiaryForm,field:"nationality_id"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"phone_number"}},[e._v("Phone Number")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.phone_number,expression:"BeneficiaryForm.phone_number"}],staticClass:"form-control",attrs:{id:"phone_number",type:"text",name:"phone_number"},domProps:{value:e.BeneficiaryForm.phone_number},on:{input:function(t){t.target.composing||e.$set(e.BeneficiaryForm,"phone_number",t.target.value)}}}),e._v(" "),i("HasError",{attrs:{form:e.BeneficiaryForm,field:"phone_number"}})],1),e._v(" "),i("hr",{staticClass:"col-8 mt-5 mb-5"}),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"relationship_id"}},[e._v("Relationship to PA")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.relationship_id,expression:"BeneficiaryForm.relationship_id"}],staticClass:"form-control",class:{"is-invalid":e.BeneficiaryForm.errors.has("relationship_id")},attrs:{name:"relationship_id",id:"relationship_id"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.BeneficiaryForm,"relationship_id",t.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0",disabled:""}},[e._v("Choose...")]),e._v(" "),e._l(e.relationships,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2),e._v(" "),i("HasError",{attrs:{form:e.BeneficiaryForm,field:"relationship_id"}})],1),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"form-label",attrs:{for:"beneficiary_id"}},[e._v("File Beneficiary ID")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.beneficiary_id,expression:"BeneficiaryForm.beneficiary_id"}],staticClass:"form-control",attrs:{id:"beneficiary_id",type:"text",name:"beneficiary_id"},domProps:{value:e.BeneficiaryForm.beneficiary_id},on:{input:function(t){t.target.composing||e.$set(e.BeneficiaryForm,"beneficiary_id",t.target.value)}}}),e._v(" "),i("HasError",{attrs:{form:e.BeneficiaryForm,field:"beneficiary_id"}})],1),e._v(" "),i("div",{staticClass:"form-group form-check"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.BeneficiaryForm.is_active,expression:"BeneficiaryForm.is_active"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_active"},domProps:{checked:Array.isArray(e.BeneficiaryForm.is_active)?e._i(e.BeneficiaryForm.is_active,null)>-1:e.BeneficiaryForm.is_active},on:{change:function(t){var i=e.BeneficiaryForm.is_active,a=t.target,n=!!a.checked;if(Array.isArray(i)){var s=e._i(i,null);a.checked?s<0&&e.$set(e.BeneficiaryForm,"is_active",i.concat([null])):s>-1&&e.$set(e.BeneficiaryForm,"is_active",i.slice(0,s).concat(i.slice(s+1)))}else e.$set(e.BeneficiaryForm,"is_active",n)}}}),e._v(" "),i("label",{staticClass:"form-check-label",attrs:{for:"is_active"}},[e._v("Is Active?")])])]),e._v(" "),i("div",{staticClass:"modal-footer"},[i("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.beneficiaryEditMode,expression:"!beneficiaryEditMode"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[e._v("Create")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.beneficiaryEditMode,expression:"beneficiaryEditMode"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Update")])])])])])])}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[i("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])}],!1,null,null,null).exports,m={name:"Casebeneficiaries",mixins:[o.Z],components:{Multiselect:s(),BeneficiaryModal:u},props:{caseeId:{required:!0}},data:function(){return{caseeBeneficiaries:[],beneficiaryEditMode:!1,selectedBeneficiary:{}}},methods:{unlinkIndividual:function(e){var t=this;this.$Progress.start(),axios.put("/api/beneficiaries/"+e+"/unlink").then((function(){Fire.$emit("caseeBeneficiariesChanged"),Swal.fire("Unlinked!","Unlinked successfully.","success"),t.$Progress.finish()})).catch((function(){t.$Progress.fail()}))},showCreateBeneficiaryModal:function(){this.beneficiaryEditMode=!1,this.selectedBeneficiary={},$("#beneficiaryModal").modal("show")},showEditBeneficiaryModal:function(e){this.beneficiaryEditMode=!0,this.selectedBeneficiary=e,$("#beneficiaryModal").modal("show")},activateBeneficiary:function(e){var t=this;Swal.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, re-activate it!"}).then((function(i){i.isConfirmed&&(t.$Progress.start(),axios.put("/api/beneficiaries/"+e.id+"/activate").then((function(){Fire.$emit("caseeBeneficiariesChanged"),Swal.fire("Activated!","It has been activated.","success"),t.$Progress.finish()})).catch((function(){Swal("Failed!","There was something wrong.","warning")})))}))},deactivateBeneficiary:function(e){var t=this;Swal.fire({title:"Are you sure?",text:"You won't be able to include this beneficiary in new referrals!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, deactivate it!"}).then((function(i){i.isConfirmed&&(t.$Progress.start(),axios.put("/api/beneficiaries/"+e.id+"/deactivate").then((function(){Fire.$emit("caseeBeneficiariesChanged"),Swal.fire("Deactivated!","It has been deactivated.","success"),t.$Progress.finish()})).catch((function(){Swal("Failed!","There was something wrong.","warning")})))}))},deleteBeneficiary:function(e){var t=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(i){i.isConfirmed&&(t.$Progress.start(),axios.delete("/api/beneficiaries/"+e.id).then((function(){Fire.$emit("caseeBeneficiariesChanged"),Swal.fire("Deleted!","It has been deleted.","success"),t.$Progress.finish()})).catch((function(){Swal("Failed!","There was something wrong.","warning")})))}))}},created:function(){var e=this;this.getCaseeBeneficiaries(this.caseeId),Fire.$on("caseeBeneficiariesChanged",(function(){e.getCaseeBeneficiaries(e.caseeId)}))}};var v=i(3379),h=i.n(v),b=i(3460),y={insert:"head",singleton:!1};h()(b.Z,y);b.Z.locals;const p=(0,f.Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"card-body"},[i("div",{staticClass:"row ml-2"},[i("button",{staticClass:"btn btn-success btn-sm mr-2",on:{click:e.showCreateBeneficiaryModal}},[i("i",{staticClass:"fas fa-plus-circle"}),e._m(0)]),e._v(" "),i("button",{staticClass:"btn btn-secondary btn-sm",on:{click:function(t){return e.getCaseeBeneficiaries(e.caseeId)}}},[i("i",{staticClass:"fas fa-sync-alt"})])]),e._v(" "),i("div",{staticClass:"row mt-3"},[e.caseeBeneficiaries.length?e._e():i("p",{staticClass:"font-italic ml-5"},[e._v("This case has no linked beneficiaries!")]),e._v(" "),e._l(e.caseeBeneficiaries,(function(t){return i("div",{key:t.id},[i("div",{staticClass:"card individual-card",staticStyle:{width:"18rem"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.is_active,expression:"beneficiary.is_active == 0"}],staticClass:"overlay bg-white-50"},[i("div",{staticClass:"p-4 text-center"},[i("h3",{staticClass:"bg-white text-secondary"},[e._v("Inactive")]),e._v(" "),i("a",{staticClass:"clickable text-primary p-2 bg-white",on:{click:function(i){return e.activateBeneficiary(t)}}},[e._v("Click here re-activate")])])]),e._v(" "),i("div",{staticClass:"card-body"},[i("h4",{staticClass:"card-title"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"float-right"},[i("a",{staticClass:"clickable",on:{click:function(i){return e.showEditBeneficiaryModal(t)}}},[i("i",{staticClass:"fas fa-pencil-alt blue mr-2"})]),e._v(" "),i("a",{staticClass:"clickable"},[i("i",{staticClass:"fa fa-trash red",on:{click:function(i){return e.deleteBeneficiary(t)}}})])]),e._v(" "),i("br"),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"mb-0 fa-ul"},[i("li",[i("span",{staticClass:"text-sm"}),e._v(e._s(t.age)+" years; "+e._s(t.gender.name)+"; "+e._s(t.nationality.name))]),e._v(" "),i("li",[i("span",{staticClass:"text-sm"}),i("i",{staticClass:"fas fa-phone-square-alt"}),e._v(" "+e._s(t.phone_number))]),e._v(" "),i("li",[i("span",{staticClass:"text-sm"}),i("b",[e._v("Passport #:")]),e._v(" "+e._s(t.passport_number))])]),e._v(" "),i("hr"),e._v(" "),e._m(1,!0),e._v(" "),i("ul",{staticClass:"mb-0 fa-ul"},[i("li",[i("span",{staticClass:"fa-li"}),i("b",[e._v("File Individual number:")]),e._v(" "+e._s(t.file_individual_number))]),e._v(" "),i("li",[i("span",{staticClass:"fa-li"}),i("b",[e._v("Relationship:")]),e._v(" "+e._s(t.relationship.name))])]),e._v(" "),i("a",{staticClass:"clickable orange",on:{click:function(i){return e.deactivateBeneficiary(t)}}},[e._v("Deactivate")])])])])}))],2)]),e._v(" "),i("BeneficiaryModal",{attrs:{"v-if":e.selectedBeneficiary.id,beneficiaryEditMode:e.beneficiaryEditMode,selectedBeneficiary:e.selectedBeneficiary},on:{caseeBeneficiariesChanged:function(t){return e.getCaseeBeneficiaries(e.caseeId)}}})],1)}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("b",[e._v(" Beneficiary")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"text-sm"},[i("b",[e._v("File Details")])])}],!1,null,"448a2208",null).exports}}]);
//# sourceMappingURL=caseBeneficiaries.js.map