"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[526],{3050:(t,a,e)=>{e.r(a),e.d(a,{default:()=>m});var i=e(7757),n=e.n(i),s=e(5714),o=e(5480);const l={mixins:[o.Z],props:{editMode:Boolean,selectedNationality:Object},data:function(){return{nationalityForm:new s.ZP({id:"",name:""})}},watch:{selectedNationality:function(t,a){this.nationalityForm.fill(this.selectedNationality)}},methods:{createNationality:function(){var t=this;this.$Progress.start(),this.nationalityForm.post("/api/nationalities").then((function(){Fire.$emit("nationalitiesChanged"),$("#nationalityModal").modal("hide"),Toast.fire({icon:"success",title:"Added successfully"}),t.$Progress.finish()})).catch((function(){t.$Progress.fail()}))},updateNationality:function(){var t=this;this.$Progress.start(),this.nationalityForm.put("/api/nationalities/"+this.nationalityForm.id).then((function(){Fire.$emit("nationalitiesChanged"),$("#nationalityModal").modal("hide"),Swal.fire("Updated!","It has been updated.","success"),t.$Progress.finish()})).catch((function(){t.$Progress.fail()}))}},created:function(){}};var r=e(1900);const d=(0,r.Z)(l,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{id:"nationalityModal",tabindex:"-1","aria-labelledby":"nationalityModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"modal-title",attrs:{id:"nationalityModalLabel"}},[t._v("Create New Nationality")]),t._v(" "),e("h5",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"modal-title",attrs:{id:"nationalityModalLabel"}},[t._v("Edit Nationality")]),t._v(" "),t._m(0)]),t._v(" "),e("form",{on:{submit:function(a){a.preventDefault(),t.editMode?t.updateNationality():t.createNationality()}}},[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"name"}},[t._v("Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nationalityForm.name,expression:"nationalityForm.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",name:"name"},domProps:{value:t.nationalityForm.name},on:{input:function(a){a.target.composing||t.$set(t.nationalityForm,"name",a.target.value)}}}),t._v(" "),e("HasError",{attrs:{form:t.nationalityForm,field:"name"}})],1)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editMode,expression:"!editMode"}],staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("Create")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.editMode,expression:"editMode"}],staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Update")])])])])])])}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])}],!1,null,null,null).exports;function c(t,a,e,i,n,s,o){try{var l=t[s](o),r=l.value}catch(t){return void e(t)}l.done?a(r):Promise.resolve(r).then(i,n)}const u={mixins:[o.Z],components:{NationalityModal:d},data:function(){return{nationalities:[],editMode:!1,selectedNationality:{}}},methods:{getNationalities:function(){var t,a=this;return(t=n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getAll("get","/api/nationalities");case 2:200==(e=t.sent).status&&(console.log(e),a.nationalities=e.data.data);case 4:case"end":return t.stop()}}),t)})),function(){var a=this,e=arguments;return new Promise((function(i,n){var s=t.apply(a,e);function o(t){c(s,i,n,o,l,"next",t)}function l(t){c(s,i,n,o,l,"throw",t)}o(void 0)}))})()},showCreateNationalityModal:function(){this.editMode=!1,this.selectedNationality={},$("#nationalityModal").modal("show")},showEditNationalityModal:function(t){this.editMode=!0,this.selectedNationality=t,$("#nationalityModal").modal("show")},deleteNationality:function(t){var a=this;Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&(a.$Progress.start(),axios.delete("/api/nationalities/"+t.id).then((function(){Fire.$emit("nationalitiesChanged"),Swal.fire("Deleted!","It has been deleted.","success"),a.$Progress.finish()})).catch((function(){Swal("Failed!","There was something wrong.","warning")})))}))}},created:function(){var t=this;this.getNationalities(),Fire.$on("nationalitiesChanged",(function(){t.getNationalities()}))}};const m=(0,r.Z)(u,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"card-body"},[e("div",{staticClass:"form-inline ml-2"},[e("button",{staticClass:"btn btn-success btn-sm mr-2",on:{click:t.showCreateNationalityModal}},[e("i",{staticClass:"fas fa-plus-circle"}),t._m(0)]),t._v(" "),e("button",{staticClass:"btn btn-secondary btn-sm mr-5",on:{click:t.getNationalities}},[e("i",{staticClass:"fas fa-sync-alt"})]),t._v(" "),e("select",{staticClass:"custom-select my-1 mr-sm-2",attrs:{id:"inlineFormCustomSelectPref"},on:{change:t.getNationalities}},[e("option",{attrs:{value:"-1",disabled:""}},[t._v("Worker...")])])]),t._v(" "),e("div",{staticClass:"row mt-3"},[e("table",{staticClass:"border table table-hover"},[t._m(1),t._v(" "),t.nationalities?e("tbody",t._l(t.nationalities,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.name))]),t._v(" "),e("td",[e("span",{staticClass:"clickable mr-2",on:{click:function(e){return t.showEditNationalityModal(a)}}},[e("i",{staticClass:"fas fa-pencil-alt blue"})]),t._v(" "),e("span",{staticClass:"clickable mr-2",attrs:{href:"#"},on:{click:function(e){return t.deleteNationality(a)}}},[e("i",{staticClass:"fa fa-trash red"})])])])})),0):t._e()])])]),t._v(" "),e("NationalityModal",{attrs:{"v-if":t.selectedNationality.id,editMode:t.editMode,selectedNationality:t.selectedNationality},on:{usersChanged:function(a){return t.getNationalities()}}})],1)}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",[e("b",[t._v(" Nationality")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Name")]),t._v(" "),e("th",[t._v("Modify")])])])}],!1,null,null,null).exports}}]);
//# sourceMappingURL=nationalities.js.map